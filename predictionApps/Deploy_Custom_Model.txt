MODEL_DIR="gs://ml_train_deploy_test/test87"
VERSION_NAME="V2"
MODEL_NAME="Test87_LogisticRegression"
CUSTOM_CODE_PATH="gs://ml_train_deploy_test/test_87/sklearn_predictor-0.1.tar.gz"
PREDICTOR_CLASS="predictor.MyPredictor"
REGION=us-central1

gcloud ai-platform models create $MODEL_NAME \
  --regions $REGION

# Install cloud beta components
gcloud components install beta

# Create version
gcloud beta ai-platform versions create $VERSION_NAME \
  --model $MODEL_NAME \
  --origin $MODEL_DIR \
  --runtime-version 1.13 \
  --python-version 3.5 \
  --package-uris $CUSTOM_CODE_PATH \
  --prediction-class $PREDICTOR_CLASS






gcloud beta ai-platform versions create V10 \
  --model $MODEL_NAME \
  --origin $MODEL_DIR \
  --runtime-version 1.14 \
  --python-version 3.5 \
  --package-uris $CUSTOM_CODE_PATH \
  --prediction-class $PREDICTOR_CLASS




# old functioning deployment
gcloud beta ai-platform versions create V17 \
  --model LogisticRegression \
  --origin gs://ml_train_deploy_test/sklearn_model_20190607_042456 \
  --runtime-version 1.14 \
  --python-version 3.5 \
  --package-uris gs://ml_train_deploy_test/my_custom_predictor-0.1.tar.gz \
  --prediction-class predictor.MyPredictor